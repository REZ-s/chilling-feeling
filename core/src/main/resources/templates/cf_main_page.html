<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">

    <title> Chilling Feeling - Main </title>

    <link rel="shortcut icon" href="/images/favicon_16px.png">
    <link href="/css/cf_style.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/js/script.js"></script>

    <style>
        /* For modal */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap');

        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .modal:before {
            display: inline-block;
            vertical-align: middle;
            content: " ";
            height: 100%;
        }

        .modal-dialog {
            display: inline-block;
            text-align: left;
            vertical-align: middle;
        }

        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            border-radius: 10px;
            background-color: #262626;
        }

        .modal-food {
            width: 375px;
            height: 296px;
            flex-grow: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 30px;
            padding: 15px 0;
            background-color: #fff;
        }

        .modal-check {
            width: 375px;
            height: 296px;
            flex-grow: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 30px;
            padding: 15px 0;
            background-color: #fff;
        }

        .modal-best-seller-period-container {
            height: 232px;
            align-self: stretch;
            flex-grow: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            gap: 30px;
            padding: 0 20px 15px;
        }

        .modal-best-seller-period-title-icon {
            width: 335px;
            height: 27px;
            flex-grow: 0;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: flex-start;
            padding: 0;
        }

        .modal-best-seller-period-title {
            width: 69px;
            height: 27px;
            flex-grow: 0;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 18px;
            font-weight: bold;
            font-stretch: normal;
            font-style: normal;
            line-height: normal;
            letter-spacing: -0.36px;
            text-align: left;
            color: #000;
        }

        .modal-best-seller-period-btn {
            width: 333px;
            height: 160px;
            flex-grow: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            gap: 5px;
            padding: 0;
        }

        .modal-frame-btn {
            width: 333px;
            height: 50px;
            flex-grow: 0;
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: flex-start;
            gap: 5px;
            padding: 0;
        }

        .modal-btn-wide-active {
            width: 335px;
            height: 50px;
            flex-grow: 0;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            padding: 0;
            border-radius: 3px;
            background-color: #004051;
        }

        .modal-btn-wide-label-active {
            height: 28px;
            flex-grow: 1;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: bold;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.75;
            letter-spacing: -0.32px;
            text-align: center;
            color: #fff;
        }

        .modal-btn-wide {
            width: 335px;
            height: 50px;
            flex-grow: 0;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            padding: 0;
            border-radius: 3px;
            border: solid 1px #dadada;
            background-color: #fff;
        }

        .modal-btn-wide-label {
            height: 28px;
            flex-grow: 1;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: bold;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.75;
            letter-spacing: -0.32px;
            text-align: center;
            color: #000;
        }

        .modal-btn-active {
            width: 164px;
            height: 50px;
            flex-grow: 0;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            padding: 0;
            border-radius: 3px;
            border: solid 1px #dadada;
            background-color: #004051;
        }

        .modal-btn-label-active {
            height: 28px;
            flex-grow: 1;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 500;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.75;
            letter-spacing: -0.32px;
            text-align: center;
            color: #fff;
        }

        .modal-btn {
            width: 164px;
            height: 50px;
            flex-grow: 0;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            padding: 0;
            border-radius: 3px;
            border: solid 1px #dadada;
            background-color: #fff;
        }

        .modal-btn-label {
            height: 28px;
            flex-grow: 1;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 500;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.75;
            letter-spacing: -0.32px;
            text-align: center;
            color: #000;
        }
    </style>
</head>
<body>
<div class="main-container">
    <div class="home">
        <!-- Header & Content -->
        <section class="wrap-top-bar-top-banner">
            <section class="top-bar">
                <div class="logo">
                    <div class="wrap-logo-text">
                        <a href="/">
                            <div class="CHILLING-FEELING">CHILLING FEELING</div>
                        </a>
                    </div>
                </div>
                <div class="btn-menu">
                    <div class="login-switch-logo-frame">
                        <input type="checkbox" id="loginSwitch">
                        <label for="loginSwitch" class="login-switch-label">
                            <div class="on-off-btn login-switch-logo-frame-label-off">OFF</div>
                        </label>
                    </div>
                    <button class="ic_search_main_24px" onclick="location.href='/search'">
                        <img src="/images/ic_search_24px.png">
                    </button>
                    <button class="ic_shopping_bag_main_24px" onclick="location.href='/cart'">
                        <img src="/images/ic_shopping_bag_24px.png">
                    </button>
                </div>
            </section>
            <section class="home-container-today">
                <div class="wrapper-illustration-title">
                    <img src="/images/illustration_container.png" class="illustration-container">
                    <div class="today-recommend-title">Ïò§Îäò ÎãπÏã†Ïùò Í∏∞Î∂ÑÍ≥º<br>Îî± ÎßûÎäî Ïà†ÏùÑ Ï∂îÏ≤úÌï¥ÎìúÎ¶¥Í≤åÏöî!</div>
                </div>
                <button sec:authorize="hasRole('USER')" class="btn-rounded-recommend"
                        onclick="location.href='/recommendation/daily'">
                    <div class="btn-rounded-recommend-label">Ï∂îÏ≤ú Î∞õÍ∏∞</div>
                </button>
            </section>
        </section>
        <section class="home-contents">
            <div class="home-taste-prod">
                <div class="home-taste-title-box">
                    <!-- ÏÇ¨Ïö©ÏûêÏùò ÎãâÎÑ§ÏûÑÏù¥ Îì§Ïñ¥Í∞ÄÏïºÌïúÎã§. (ÎãâÎÑ§ÏûÑ ÎØ∏Ï†ïÏù¥Î©¥ Í∏∞Î≥∏Í∞íÏúºÎ°ú Ïù¥Î©îÏùºÏ£ºÏÜå) -->
                    <div class="home-taste-title">
                        <b class="name-coloring" id="username">Guest</b>
                         ÎãòÏùÑ ÏúÑÌïú Ï∑®Ìñ•Ï†ÄÍ≤©</div>
                    <div class="home-taste-subtitle">ÏöîÏ¶ò Ïù¥Îü∞ Ïä§ÌÉÄÏùº Ï¢ãÏïÑÌïòÏãúÎçîÎùºÍµ¨Ïöîüòä</div>
                </div>
                <div class="home-taste-prod-swiper-wrapper" id="productCards">
                    <div class="product-cards-inner">
                    <!-- Items -->
                    <!-- 2Í∞úÍπåÏßÄ ÎÖ∏Ï∂úÌïòÍ≥† ÏòÜÏóê ÏÇ¥Ïßù Î≥¥Ïù¥ÎèÑÎ°ù (swipe Í∞ÄÎä•) -->
<!--                    <div class="wrap-product-card01">-->
<!--                        <div class="product-card01">-->
<!--                            <div class="product-list01-photo-container">-->
<!--                                <div class="photo-container-wrap-img">-->
<!--                                    <img src="/images/item-rep01.png" class="recommend-image01">-->
<!--                                </div>-->
<!--                                <button class="ic_heart_24px btn-heart">-->
<!--                                    <img src="/images/ic_heart_24px.png">-->
<!--                                </button>-->
<!--                            </div>-->
<!--                            <div class="product-list01-product-info">-->
<!--                                <div class="product-list01-product-name">-->
<!--                                    <div class="product-list01-product-name-type">ÏúÑÏä§ÌÇ§</div>-->
<!--                                    <div class="product-list01-product-name-name">ÏßêÎπî ÌôîÏù¥Ìä∏</div>-->
<!--                                </div>-->
<!--                                <div class="product-list01-price">-->
<!--                                    <div class="product-list01-price-original-price">40,680</div>-->
<!--                                    <div class="product-list01-price-sale">-->
<!--                                        <div class="discount-rate">21%</div>-->
<!--                                        <div class="discounted-price">32,000Ïõê</div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="product-list01-caption">-->
<!--                                    <div class="star-score-review">-->
<!--                                        <img src="/images/ic_star_10px.png" class="ic_star_10px">-->
<!--                                        <div class="score">-->
<!--                                            <div class="star-rating">4.9</div>-->
<!--                                            <div class="reviews">(237)</div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="wrap-chip">-->
<!--                                        <div class="product-chip">-->
<!--                                            <div class="chip-label">Í∞ÄÏÑ±ÎπÑ</div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                        </div>
                </div>
            </div>
            <div class="home-food-prod">
                <div class="home-food-title-box">
                    <div class="home-food-title">Ïò§ÎäòÏùò ÏïàÏ£º Îã®ÏßùÏùÑ Ï∞æÏïÑÎìúÎ¶¥Í≤åÏöî</div>
                    <div class="home-food-subtitle-group">
                        <div class="wrap-drop-down-food">
                            <!-- ÌÅ¥Î¶≠ÌïòÎ©¥ ÏòµÏÖòÏùÑ Í≥†Î•º Ïàò ÏûàÎäî Î™®Îã¨Ï∞Ω Ïã§Ìñâ -->
                            <div class="drop-down-food" id="dropDownFood">
                                <div class="food-type" id="food">Îñ°Î≥∂Ïù¥</div>
                                <img src="/images/ic_arrow_drop_down_10px.png" class="arrow-drop-down-10px">
                            </div>
                        </div>
                        <div class="home-food-subtitle">ÏôÄ Îã®ÏßùÏùÄ</div>
                    </div>
                </div>
                <div class="home-food-prod-swiper-wrapper" id="productCard02">
<!--                    <div class="product-card02">-->
<!--                        <div class="product-list02-photo-container">-->
<!--                            <img src="/images/item-rep02.png" class="recommend-image02">-->
<!--                        </div>-->
<!--                        <div class="product-list02-product-info">-->
<!--                            <div class="product-list02-name-star">-->
<!--                                <div class="product-list02-name">ÎπÑÏóêÎù† Î™®Ïä§Ïπ¥ÌÜ† Îã§Ïä§Ìã∞</div>-->
<!--                                <div class="star-group">-->
<!--                                    <img src="/images/ic_star_10px.png" class="ic_star_10px">-->
<!--                                    <img src="/images/ic_star_10px.png" class="ic_star_10px">-->
<!--                                    <img src="/images/ic_star_10px.png" class="ic_star_10px">-->
<!--                                    <img src="/images/ic_star_10px.png" class="ic_star_10px">-->
<!--                                    <img src="/images/ic_star_off_10px.png" class="ic_star_off_10px">-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="product-list02-caption-price">-->
<!--                                <div class="product-list02-caption">-->
<!--                                    Îß§Ïö¥ ÎßõÏùÑ Îã¨ÎûòÏ§Ñ Ïø®ÌîºÏä§ Í∞ôÏùÄ ÏôÄÏù∏ÏóêÎäî Î™®Ïä§Ïπ¥ÌÜ† Îã§Ïä§Ìã∞!-->
<!--                                    <br>Ìñ•Í∏ãÌïú Î≥µÏà≠ÏïÑ Ìñ•Ïù¥ ÎÇòÎ©∞ Í∏∞Ìè¨Í∞Ä Î∂ÄÎìúÎüΩÍ≥†-->
<!--                                    <br>ÎèÑÏàòÎèÑ ÎÇÆÏïÑ Î∂ÄÎã¥ÏóÜÏù¥ Î®πÍ≥† ÎßàÏã§ Ïàò ÏûàÏñ¥Ïöî.-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                </div>
            </div>
            <div class="home-best-seller">
                <div class="home-best-seller-title-box">
                    <div class="wrap-drop-down-date">
                        <!-- ÌÅ¥Î¶≠ÌïòÎ©¥ ÏòµÏÖòÏùÑ Í≥†Î•º Ïàò ÏûàÎäî Î™®Îã¨Ï∞Ω Ïã§Ìñâ -->
                        <div class="drop-down-date" id="dropDownDate">
                            <div class="date" id="date">Ïò§Îäò</div>
                            <img src="/images/ic_arrow_drop_down_10px.png" class="arrow-drop-down-10px">
                        </div>
                    </div>
                    <div class="home-best-seller-title">Ï†úÏùº Ïûò ÎÇòÍ∞îÏñ¥Ïöî</div>
                </div>
                <div class="home-best-seller-wrap-product-card01">
                    <!-- 1Í∞úÏôÄ Ïù∏Í∏∞Í≤ÄÏÉâÏñ¥ -->
                    <div class="wrap-horizontal" id="bestSellerFrame">
<!--                        <div class="product-card01">-->
<!--                            <div class="product-list01-photo-container">-->
<!--                                <div class="photo-container-wrap-img">-->
<!--                                    <img src="/images/item-rep01.png" class="recommend-image01">-->
<!--                                </div>-->
<!--                                <button class="ic_heart_24px btn-heart">-->
<!--                                    <img src="/images/ic_heart_24px.png">-->
<!--                                </button>-->
<!--                            </div>-->
<!--                            <div class="product-list01-product-info">-->
<!--                                <div class="product-list01-product-name">-->
<!--                                    <div class="product-list01-product-name-type">ÏúÑÏä§ÌÇ§</div>-->
<!--                                    <div class="product-list01-product-name-name">ÏßêÎπî ÌôîÏù¥Ìä∏</div>-->
<!--                                </div>-->
<!--                                <div class="product-list01-caption">-->
<!--                                    <div class="star-score-review">-->
<!--                                        <img src="/images/ic_star_10px.png" class="ic_star_10px">-->
<!--                                        <div class="score">-->
<!--                                            <div class="star-rating">4.9</div>-->
<!--                                            <div class="reviews">(237)</div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="wrap-chip">-->
<!--                                        <div class="product-chip">-->
<!--                                            <div class="chip-label">Í∞ÄÏÑ±ÎπÑ</div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="banner-keyword">-->
<!--                            <div class="banner-keyword-title">Ïù∏Í∏∞ Í≤ÄÏÉâÏñ¥</div>-->
<!--                            <div class="keyword-list">-->
<!--                                &lt;!&ndash; ÏµúÏÉÅÏúÑ 5Í∞ú ÎÖ∏Ï∂ú &ndash;&gt;-->
<!--                                <li>-->
<!--                                    <div class="rank-no">1</div>-->
<!--                                    <div class="rank-name">Ïã†ÏÉÅ ÏôÄÏù∏</div>-->
<!--                                    <div class="rank-up">new</div>-->
<!--                                </li>-->
<!--                                <li>-->
<!--                                    <div class="rank-no">2</div>-->
<!--                                    <div class="rank-name">Ïã†ÏÉÅ ÏôÄÏù∏</div>-->
<!--                                    <div class="rank-up">new</div>-->
<!--                                </li>-->
<!--                                <li>-->
<!--                                    <div class="rank-no">3</div>-->
<!--                                    <div class="rank-name">Ïã†ÏÉÅ ÏôÄÏù∏</div>-->
<!--                                    <div class="rank-up">new</div>-->
<!--                                </li>-->
<!--                                <li>-->
<!--                                    <div class="rank-no">4</div>-->
<!--                                    <div class="rank-name">Ïã†ÏÉÅ ÏôÄÏù∏</div>-->
<!--                                    <div class="rank-up">new</div>-->
<!--                                </li>-->
<!--                                <li>-->
<!--                                    <div class="rank-no">5</div>-->
<!--                                    <div class="rank-name">Ïã†ÏÉÅ ÏôÄÏù∏</div>-->
<!--                                    <div class="rank-up">new</div>-->
<!--                                </li>-->
<!--                            </div>-->
<!--                        </div>-->
                    </div>
                </div>
            </div>
            <div class="home-feed-prod">
                <div class="home-title-box">
                    <div class="home-title">Îã§Î•∏ ÏÇ¨ÎûåÎì§Ïùò ÌòºÏà†ÎùºÏù¥ÌîÑÎäî?</div>
                    <div class="home-subtitle">ÏãúÏõêÌïú Ïó¨Î¶Ñ Î∂ÑÏúÑÍ∏∞ ÎäêÎÅºÍ∏∞<span class="text-style-1">üå¥</span>
                    </div>
                </div>
                <div class="home-feed-prod-swiper-wrapper">
                    <div class="wrap-product-card03">
                        <img src="/images/feed-prod-img.png" class="prod-img">
                        <!--                       <div class="prod-img">
                            <div class="product-card03">
                                <div class="wrap-product-card03-img">
                                </div>
                                <div class="wrap-product-card03-texts">
                                    <div class="product-card03-type">ÏôÄÏù∏</div>
                                    <div class="product-card03-name">Î∏åÎ†àÎìú Ïï§ Î≤ÑÌÑ∞ ÎÇòÌåå ÌîºÎÖ∏ÎàÑÏïÑ 2019</div>
                                </div>
                            </div>
                        </div>-->
                        <div class="feed-prodTit">
                            <div class="feed-prod-title">ÌîºÎÖ∏ÎàÑÏïÑ Ï≤òÏùå Î®πÏñ¥Î¥§ÎäîÎç∞ ÎÑàÎ¨¥ ÎßõÏûàÎÑ§ÏöîüòÜ</div>
                            <div class="feed-prod-tag">#ÌîºÎÖ∏ÎàÑÏïÑ #Î†àÎìúÏôÄÏù∏</div>
                        </div>
                    </div>
                </div>
                <div class="swiper-pagination-progressbar">
                    <!-- index + 1 Îî∞Îùº Ïò§Î•∏Ï™ΩÏúºÎ°ú Ìïú Ïπ∏ Ïù¥Îèô -->
                    <div class="progressbar-active">
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer -->
        <section class="bottom" id="footer"></section>
    </div>
</div>
<!-- modal -->
<div class="modal  fade" id="snacks" role="dialog">
    <div class="modal-dialog">
        <!-- modal content-->
        <div class="modal-content">
            <div class="modal-food">
                <div class="drag-handle-stroke"></div>

                <div class="modal-best-seller-period-container">
                    <div class="modal-best-seller-period-title-icon">
                        <div class="modal-best-seller-period-title">ÏïàÏ£º ÏÑ†ÌÉù</div>
                        <img src="/images/ic_close_24px.png" class="ic_close_24px">
                    </div>
                    <div class="modal-best-seller-period-btn">
                        <div class="modal-frame-btn">
                            <button class="modal-btn-active" id="f1">
                                <div class="modal-btn-label-active">Îñ°Î≥∂Ïù¥</div>
                            </button>
                            <button class="modal-btn" id="f2">
                                <div class="modal-btn-label">Î∞©Ïñ¥Ìöå</div>
                            </button>
                        </div>
                        <div class="modal-frame-btn">
                            <button class="modal-btn" id="f3">
                                <div class="modal-btn-label">ÏÇºÍ≤πÏÇ¥</div>
                            </button>
                            <button class="modal-btn" id="f4">
                                <div class="modal-btn-label">ÌÜ†ÎßàÌÜ†ÌååÏä§ÌÉÄ</div>
                            </button>
                        </div>
                        <div class="modal-frame-btn">
                            <button class="modal-btn" id="f5">
                                <div class="modal-btn-label">Îì±Ïã¨ / ÏïàÏã¨</div>
                            </button>
                            <button class="modal-btn" id="f6">
                                <div class="modal-btn-label">Ï¥àÏΩúÎ¶ø</div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="period" role="dialog">
    <div class="modal-dialog">
        <!-- modal content-->
        <div class="modal-content">
            <div class="modal-check">
                <div class="Drag-handle-Stroke"></div>
                <div class="modal-best-seller-period-container">
                    <div class="modal-best-seller-period-title-icon">
                        <div class="modal-best-seller-period-title">Ï°∞ÌöåÍ∏∞Í∞Ñ</div>
                        <img src="/images/ic_close_24px.png" class="ic_close_24px">
                    </div>
                    <div class="modal-best-seller-period-btn">
                        <button class="modal-btn-wide-active" id="d1">
                            <div class="modal-btn-wide-label-active">Ïò§Îäò</div>
                        </button>
                        <button class="modal-btn-wide" id="d2">
                            <div class="modal-btn-wide-label">Ïù¥Î≤à Ï£º</div>
                        </button>
                        <button class="modal-btn-wide" id="d3">
                            <div class="modal-btn-wide-label">Ïù¥Î≤à Îã¨</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script th:inline="javascript">
    const username = /*[[${username}]]*/ '';
    let goodsViewList = /*[[${goodsViewList}]]*/ [];    // Ï†ÑÏ≤¥ ÏÉÅÌíà Î¶¨Ïä§Ìä∏
    let goodsViewDetails = /*[[${goodsViewDetails}]]*/ [];    // ÏÉÅÌíà ÏÉÅÏÑ∏ Ï†ïÎ≥¥
    let days = 7;

    let productsFrame = document.getElementById("productCards");
    let productCard02 = document.getElementById("productCard02");
    let bestSellerFrame = document.getElementById('bestSellerFrame');
    let innerSlider = document.querySelector(".product-cards-inner")
    let pressed = false;
    let startX, nowX;

    const loginSwitchCheckBox = document.getElementById("loginSwitch");
    const onOffLabel = document.querySelector(".on-off-btn");
    const dateDropDown = document.getElementById('dropDownDate');
    const foodDropDown = document.getElementById('dropDownFood');
    const periodModal = document.getElementById('period');
    const snacksModal = document.getElementById('snacks');

    const foodButtons = Array.from({length: 6}, (_, index) => {
        const button = document.getElementById('f' + (index + 1));
        const label = button.children[0];
        return {button, label, index: index + 1};
    });

    const dateButtons = Array.from({length: 3}, (_, index) => {
        const button = document.getElementById('d' + (index + 1));
        const label = button.children[0];
        return {button, label, index: index + 1};
    });

    createFooter();
    displayUsername(username);
    displayLoginState();
    displayItemList(innerSlider, goodsViewList);
    displayBestSellerGoods(bestSellerFrame, days);
    displayWishListGoods(innerSlider, goodsViewList);
    createItemCard02(productCard02, goodsViewDetails);
    setSwiperSlide(productsFrame, innerSlider);
    activeGoodsDetailsURL();

    async function displayLoginState() {
        const userLoginState = await checkUserLoginState();

        if (userLoginState === null || userLoginState.length === 0) {
            loginSwitchCheckBox.checked = false;
            onOffLabel.textContent = "OFF";
            onOffLabel.classList.remove("login-switch-logo-frame-label-on");
            onOffLabel.classList.add("login-switch-logo-frame-label-off");
        } else {
            loginSwitchCheckBox.checked = true;
            onOffLabel.textContent = "ON";
            onOffLabel.classList.remove("login-switch-logo-frame-label-off");
            onOffLabel.classList.add("login-switch-logo-frame-label-on");
        }
    }

    async function checkUserLoginState() {
        try {
            const response = await fetch("/api/v1/user/authentication", {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                }
            });

            if (response.ok) {
                return await response.text();
            }
            throw response;
        } catch (error) {
            throw error;
        }
    }

    loginSwitchCheckBox.addEventListener("click", function () {
        if (onOffLabel.textContent === "OFF") {
            location.href = "/login";
        } else {
            location.href = "/logout";
        }
    });

    document.querySelectorAll('.btn-heart').forEach(btnHeart => {
        btnHeart.addEventListener('click', (e) => {
            e.preventDefault();
            let img = btnHeart.children[0];
            if (img.src.includes('ic_heart_24px')) {
                img.src = '/images/ic_heart_fill_24px.png';
            } else {
                img.src = '/images/ic_heart_24px.png';
            }
        });
    });

    foodDropDown.addEventListener('click', function (e) {
        e.preventDefault();
        $(snacksModal).modal('show');
    });

    dateDropDown.addEventListener('click', function (e) {
        e.preventDefault();
        $(periodModal).modal('show');
    });

    foodButtons.forEach(({button, label, index}) => {
        button.addEventListener('click', function () {
            handleFoodButtonClick(button, label, index);
        });
    });

    dateButtons.forEach(({button, label, index}) => {
        button.addEventListener('click', function () {
            handleDateButtonClick(button, label, index);
        });
    });

    function handleFoodButtonClick(button, label, index) {
        if (button.classList.contains('modal-btn-active')) {
            document.getElementById('food').innerText = label.innerText;
            $(snacksModal).modal('hide');
        } else {
            convertCheckFoodModalBtns(index);
            button.classList.remove('modal-btn');
            label.classList.remove('modal-btn-label');
            button.classList.add('modal-btn-active');
            label.classList.add('modal-btn-label-active');
        }
    }

    function handleDateButtonClick(button, label, index) {
        if (button.classList.contains('modal-btn-wide-active')) {
            document.getElementById('date').innerText = label.innerText;
            $(periodModal).modal('hide');
        } else {
            convertCheckDateModalBtns(index);
            button.classList.remove('modal-btn-wide');
            label.classList.remove('modal-btn-wide-label');
            button.classList.add('modal-btn-wide-active');
            label.classList.add('modal-btn-wide-label-active');
        }
    }

    function convertCheckFoodModalBtns(myBtnIndex) {
        for (let i = 1; i <= 6; i++) {
            if (myBtnIndex === i) {
                continue;
            }

            let btn = document.getElementById('f' + i);

            btn.classList.remove('modal-btn-active');
            btn.children[0].classList.remove('modal-btn-label-active');
            btn.classList.add('modal-btn');
            btn.children[0].classList.add('modal-btn-label');
        }
    }

    function convertCheckDateModalBtns(myBtnIndex) {
        for (let i = 1; i <= 3; i++) {
            if (myBtnIndex === i) {
                continue;
            }

            let btn = document.getElementById('d' + i);

            btn.classList.remove('modal-btn-wide-active');
            btn.children[0].classList.remove('modal-btn-wide-label-active');
            btn.classList.add('modal-btn-wide');
            btn.children[0].classList.add('modal-btn-wide-label');
        }
    }
</script>
</html>