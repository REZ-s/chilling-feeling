<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">

    <title> Chilling Feeling - Search </title>

    <link rel="shortcut icon" href="/images/favicon_16px.png">
    <link href="/css/cf_style.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/js/script.js"></script>
</head>
<body>
<div class="search-result-container">
    <!-- Header -->
    <section class="wrap-search-top-bar-result">
        <div class="search-top-bar-result">
            <a href="javascript:history.back()">
                <img src="/images/ic_back_black_24px.png" class="ic_back_24px">
            </a>
            <div class="search-form-result">
                <input class="search-form-input-result" placeholder="어떤 주류를 찾으시나요?" id="searchInput">
                <div class="wrap-ic-search-form-result">
                    <button class="ic_form_close_16px" id="searchInputClear">
                        <img src="/images/ic_form_close_16px.png">
                    </button>
                    <button class="ic_search_24px" id="searchButton">
                        <img src="/images/ic_search_black_24px.png">
                    </button>
                </div>
            </div>
            <button class="ic_shopping_bag_24px" onclick="location.href='/cart'">
                <img src="/images/ic_shopping_bag_black_24px.png">
            </button>
        </div>
    </section>

    <!-- Content -->
    <section class="category-container" id="contentFrame">
        <div class="category-tab-bar">
            <button class="wrap-tab-bar-label-ac">
                <div class="tab-bar-label-ac">전체</div>
            </button>
            <button class="wrap-tab-bar-label">
                <div class="tab-bar-label">와인</div>
            </button>
            <button class="wrap-tab-bar-label">
                <div class="tab-bar-label">위스키</div>
            </button>
            <button class="wrap-tab-bar-label">
                <div class="tab-bar-label">전통주</div>
            </button>
            <button class="wrap-tab-bar-label">
                <div class="tab-bar-label">칵테일</div>
            </button>
            <button class="wrap-tab-bar-label">
                <div class="tab-bar-label">논알콜</div>
            </button>
        </div>
        <!-- (1) 검색 결과가 없는 경우 -->
        <!--<div class="search-result-contents-frame-inner" id="noDataFrame" style="display: none;">
            <div class="wrap-illustration-text-search-no-data">
                <div class="illustration-search-no-data">
                    <img src="/images/ic_x_face.png">
                </div>

                <div class="text-search-no-data">
                    <span class="text-style-1">asdzxc</span>에 대한 결과가 없습니다.
                </div>
            </div>
        </div>-->
        <!-- (2) 검색 결과가 있는 경우 -->
        <!--<div class="wrap-category-container" id="yesDataFrame">
            <div class="wrap-counting-range">
                <div class="counting-product-text">총 150개</div>
                <div class="wrap-range-chevron">
                    <div class="range-label">신상품순</div>
                    <img src="/images/ic_chevron_down_10px.png" class="ic_chevron_down_10px">
                </div>
            </div>

            <div class="wrap-category-product-list">
                &lt;!&ndash; 한 줄에 2개씩 &ndash;&gt;
                <div class="wrap-horizontality">
                    <div class="product-card01">
                        <div class="product-list01-photo-container">
                            <div class="photo-container-wrap-img">
                                <img src="/images/item-rep01.png" class="recommend-image01">
                            </div>
                            <button class="ic_heart_24px btn-heart">
                                <img src="/images/ic_heart_24px.png">
                            </button>
                        </div>
                        <div class="product-list01-product-info">
                            <div class="product-list01-product-name">
                                <div class="product-list01-product-name-type">위스키</div>
                                <div class="product-list01-product-name-name">짐빔 화이트</div>
                            </div>
                            <div class="product-list01-caption">
                                <div class="star-score-review">
                                    <img src="/images/ic_star_10px.png" class="ic_star_10px">
                                    <div class="score">
                                        <div class="star-rating">4.9</div>
                                        <div class="reviews">(237)</div>
                                    </div>
                                </div>
                                <div class="wrap-chip">
                                    <div class="product-chip">
                                        <div class="chip-label">가성비</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="product-card01">
                        <div class="product-list01-photo-container">
                            <div class="photo-container-wrap-img">
                                <img src="/images/item-rep01.png" class="recommend-image01">
                            </div>
                            <button class="ic_heart_24px btn-heart">
                                <img src="/images/ic_heart_24px.png">
                            </button>
                        </div>
                        <div class="product-list01-product-info">
                            <div class="product-list01-product-name">
                                <div class="product-list01-product-name-type">위스키</div>
                                <div class="product-list01-product-name-name">짐빔 화이트</div>
                            </div>
                            <div class="product-list01-caption">
                                <div class="star-score-review">
                                    <img src="/images/ic_star_10px.png" class="ic_star_10px">
                                    <div class="score">
                                        <div class="star-rating">4.9</div>
                                        <div class="reviews">(237)</div>
                                    </div>
                                </div>
                                <div class="wrap-chip">
                                    <div class="product-chip">
                                        <div class="chip-label">가성비</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>-->
    </section>

    <!-- Footer -->
    <section class="bottom" id="footer">
    </section>

</div>
</body>
<script th:inline="javascript">

    const categoryTabBar = document.querySelector(".category-tab-bar");
    const tabLabels = categoryTabBar.querySelectorAll(".wrap-tab-bar-label, .wrap-tab-bar-label-ac");

    let searchInput = document.getElementById('searchInput');
    let searchButton = document.getElementById('searchButton');
    let searchClear = document.getElementById('searchInputClear');

    let goodsViewList = /*[[${goodsViewList}]]*/ [];    // 사용자가 검색한 단어에 대한 상품 리스트
    let query = /*[[${query}]]*/ "";                    // 사용자가 검색한 단어

    let products;                               // 실제 보여줄 상품 리스트

    window.onload = function () {
        searchInput.value = query;
        searchClear.style.display = "none";
        createFooter('/category');
        displayItemListForCategory(document.getElementById('contentFrame'), goodsViewList);
        displayWishListGoods(document.getElementById('contentFrame'), goodsViewList);
    }

    // 카테고리 목록 탭 버튼 클릭 시
    tabLabels.forEach(function(label) {
        label.addEventListener("click", function() {
            if (label.classList.contains("wrap-tab-bar-label-ac")) {
                return;
            }

            // 선택한 탭 활성화
            label.children[0].classList.replace("tab-bar-label", "tab-bar-label-ac");
            label.classList.replace("wrap-tab-bar-label", "wrap-tab-bar-label-ac");

            // 다른 탭 비활성화
            tabLabels.forEach(function(otherLabel) {
                if (otherLabel !== label) {
                    otherLabel.children[0].classList.replace("tab-bar-label-ac", "tab-bar-label");
                    otherLabel.classList.replace("wrap-tab-bar-label-ac", "wrap-tab-bar-label");
                }
            });

            // 기존 상품 리스트 폼 삭제
            const yesDataFrame = document.getElementById('yesDataFrame');
            const noDataFrame = document.getElementById('noDataFrame');
            const surplusEmptySpace = document.getElementById('surplusEmptySpace');
            if (yesDataFrame !== null) {
                yesDataFrame.remove();
            }
            if (noDataFrame !== null) {
                noDataFrame.remove();
            }
            if (surplusEmptySpace !== null) {
                surplusEmptySpace.remove();
            }

            // 새로운 상품 리스트 폼 추가
            const productType = label.querySelector(".tab-bar-label-ac").innerText;
            displayItemListForCategory(document.getElementById('contentFrame'), goodsViewList, productType);
            displayWishListGoods(document.getElementById('contentFrame'), getProductsByType(goodsViewList, productType));
        });
    });

    searchClear.addEventListener("mouseenter", function() {
        searchClear.addEventListener("click", function() {
            searchInput.value = "";
        });
    });

    searchClear.addEventListener("mouseout", function() {
        searchInput.addEventListener("focusout", function() {
            searchClear.style.display = "none";
        });
    });

    searchInput.addEventListener("focusin", function() {
        if (searchInput.value !== "") {
            searchClear.style.display = "flex";
        }
    });

    searchInput.addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
            getSearchWord(searchInput.value.trim());
        }
    });

    searchButton.addEventListener('click', function () {
        getSearchWord(searchInput.value.trim());
    });

</script>
</html>